---
# This play sets up the main Satellite Server
# This must complete successfully before creating any capsule servers
# This play now uses the yml template method for generating the installation configuration
# Please see satellite-answers.default.yml in the template directory
#

- name: Deploy the configuration Template to foreman-installer directory (backup original)
  template:
    src: templates/satellite-answers.yml
    dest: /etc/foreman-installer/scenarios.d/satellite-answers.yml
    backup: yes

- name: Install the Satellite Server
  command: "satellite-installer --scenario={{ scenario }}"

